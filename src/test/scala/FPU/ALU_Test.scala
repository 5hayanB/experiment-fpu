package FPU
import chisel3._, chiseltest._, org.scalatest.freespec.AnyFreeSpec


class ALU_Test extends AnyFreeSpec with ChiselScalatestTester {
  "ALU" in {
    test(new ALU) {
      alu =>
        val testcases: Seq[(Int, String)] = Seq(
          //-1499591369 -> "b11001110101100101100001111100110",
          648258640 -> "b01001110000110101000111010010001"//,
          //154112043 -> "b01001101000100101111100100000011",
          //31936245 -> "b01001011111100111010011101111010",
          //-1986441000 -> "b11001110111011001100110101011110",
          //-284989606 -> "b11001101100001111110010011000101",
          //-1847456881 -> "b11001110110111000011101111101001",
          //-324187610 -> "b11001101100110101001010110101111",
          //1922895273 -> "b01001110111001010011101000011011",
          //-443753964 -> "b11001101110100111001100100101111",
          //2045500108 -> "b01001110111100111101011110110110",
          //1539610315 -> "b01001110101101111000100100101110",
          //-903621226 -> "b11001110010101110111000010101010",
          //-1371269749 -> "b11001110101000110111011111010101",
          //596628807 -> "b01001110000011100011111101010101",
          //-548048381 -> "b11001110000000101010101000111000",
          //-1262897697 -> "b11001110100101101000110010010100",
          //-798231825 -> "b11001110001111100101000000110100",
          //-201071568 -> "b11001101001111111100000110111101",
          //-859994195 -> "b11001110010011010000100111100001",
          //1264350247 -> "b01001110100101101011100011101000",
          //-1099097093 -> "b11001110100000110000010111001000",
          //319647407 -> "b01001101100110000110101101110101",
          //108218145 -> "b01001100110011100110100011100100",
          //1611203271 -> "b01001110110000000001001000000110",
          //985460000 -> "b01001110011010101111001110110100",
          //2062335288 -> "b01001110111101011101100101111010",
          //-351659800 -> "b11001101101001111010111100111001",
          //1104411903 -> "b01001110100000111010011111111010",
          //-47403134 -> "b11001100001101001101010000100000",
          //722481616 -> "b01001110001011000100000011000111",
          //-799948340 -> "b11001110001111101011100011111001",
          //838787215 -> "b01001110010001111111101110000010",
          //405315533 -> "b01001101110000010100010011111110",
          //-188096662 -> "b11001101001100110110001000001001",
          //1460150526 -> "b01001110101011100001000001000010",
          //1909890774 -> "b01001110111000111010110100111110",
          //705028378 -> "b01001110001010000001011110000100",
          //865401654 -> "b01001110010011100101001111101101",
          //1382656421 -> "b01001110101001001101001101010011",
          //724357918 -> "b01001110001011001011001101001100",
          //-164517486 -> "b11001101000111001110010101100111",
          //-1644561032 -> "b11001110110001000000110000000101",
          //-1894276352 -> "b11001110111000011101000010111010",
          //1152051905 -> "b01001110100010010101010111010110",
          //-1083986045 -> "b11001110100000010011100010100001",
          //1595245232 -> "b01001110101111100010101100000101",
          //-1801389593 -> "b11001110110101101011111000001100",
          //-218238462 -> "b11001101010100000010000011100000",
          //212342801 -> "b01001101010010101000000110000001",
          //1646621017 -> "b01001110110001000100101011100011",
          //1371296473 -> "b01001110101000110111100010100110",
          //1650095621 -> "b01001110110001001011010011101100",
          //1965940573 -> "b01001110111010100101101110111111",
          //-1499283267 -> "b11001110101100101011101001111111",
          //-1390634256 -> "b11001110101001011100011011001010",
          //-1145312790 -> "b11001110100010001000100000101100",
          //382782559 -> "b01001101101101101000011001100011",
          //-1018995515 -> "b11001110011100101111001010001101",
          //-2129901735 -> "b11001110111111011110011101110001",
          //284933393 -> "b01001101100001111101110111101001",
          //1946040768 -> "b01001110111001111111110001110100",
          //-1915585947 -> "b11001110111001000101101100001011",
          //-462229085 -> "b11001101110111000110100001110011",
          //-433882620 -> "b11001101110011101110010000110000",
          //-1702795220 -> "b11001110110010101111110100110000",
          //576769291 -> "b01001110000010011000001100110100",
          //-1880131288 -> "b11001110111000000010000100001110",
          //-1250852598 -> "b11001110100101010001110011111110",
          //-1450396763 -> "b11001110101011001110011010011001",
          //-1921673123 -> "b11001110111001010001010011001111",
          //-2037958150 -> "b11001110111100101111000110001100",
          //1607745335 -> "b01001110101111111010100001111110",
          //489922588 -> "b01001101111010011001110100000001",
          //-583413592 -> "b11001110000010110001100010111101",
          //-1619880277 -> "b11001110110000010001101011010011",
          //1498672678 -> "b01001110101100101010011111011100",
          //-146074153 -> "b11001101000010110100111010100011",
          //-69429621 -> "b11001100100001000110110100101111",
          //-1778611810 -> "b11001110110101000000011011101101",
          //-1010361446 -> "b11001110011100001110001110010010",
          //-2048288269 -> "b11001110111101000010110011001100",
          //121364600 -> "b01001100111001110111110000001111",
          //120729125 -> "b01001100111001100100010111000101",
          //1560469138 -> "b01001110101110100000010110111101",
          //-1430043578 -> "b11001110101010100111100101110111",
          //1167964438 -> "b01001110100010110011101101110010",
          //1514529162 -> "b01001110101101001000101111000011",
          //1314597522 -> "b01001110100111001011011001010101",
          //1367229591 -> "b01001110101000101111110010001001",
          //-1173644955 -> "b11001110100010111110100011001101",
          //75757752 -> "b01001100100100000111111100010111",
          //-947390149 -> "b11001110011000011110000000011011",
          //-1034338222 -> "b11001110011101101001101011111111",
          //1960717320 -> "b01001110111010011011110001011000",
          //2096107500 -> "b01001110111110011110000000100000",
          //-581384443 -> "b11001110000010101001110011100100",
          //-1200605184 -> "b11001110100011110001111110010000",
          //-1173188228 -> "b11001110100010111101101011011101",
          //-1302637091 -> "b110011101001101101001001Must be 01010100"
        )

        for (i <- testcases) {
          alu.io.input(0).poke(i._1.S)
          alu.io.input(1).poke(0.S)
          alu.io.input(2).poke(0.S)
          alu.io.aluCtl.poke(1.U)
          alu.io.roundingMode.poke(6.U)
          alu.io.detectTininess.poke(0.U)

          alu.clock.step(1)

          alu.io.out.expect(i._2.U)
        }

        alu.clock.step(1)
    }
  }
}
